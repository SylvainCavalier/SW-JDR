<div class="labo-container">
  <h2 class="labo-title">Labo de recherche génétique</h2>

  <div class="labo-header">
    <%= link_to "Retour", genetique_dashboard_path, class: "btn btn-outline-secondary go-back-two" %>

    <div class="labo-stats">
      <span class="stat-badge">
        <i class="fas fa-flask"></i> Points d'étude : <strong><%= @study_points %></strong>
      </span>
      <span class="stat-badge">
        <i class="fas fa-vial"></i> Fioles disponibles : <strong><%= @fioles %></strong>
      </span>
    </div>

    <button class="btn btn-success recherche-btn" data-controller="recherche" data-action="click->recherche#lancer">
      <i class="fas fa-search"></i> Rechercher de nouveaux traits génétiques
    </button>
  </div>

  <% Gene.categories.keys.each do |cat| %>
    <h4 class="category-title"><%= cat.titleize %></h4>
    <div class="genes-grid">
      <% @genes.select { |gene| gene.category == cat }.each do |gene| %>
        <% user_gene = @user_genes[gene.id] %>
        <div class="gene-card <%= user_gene ? 'unlocked' : 'locked' %>">
          <span class="gene-name"><%= gene.property %></span>
          <span class="gene-level">Niveau : <%= user_gene&.level || 0 %></span>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<!-- Modale de résultat -->
<div class="modal fade" id="rechercheResultModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content p-4">
      <h5 id="recherche-result-title" class="text-center"></h5>
      <div class="text-center mt-3">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
      </div>
    </div>
  </div>
</div>
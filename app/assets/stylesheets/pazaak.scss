.pazaak-table {
  display: grid;
  grid-template-columns: 1fr 4px 1fr;
  align-items: start;
  gap: 16px;
  /* Variables responsives pour l'échelle des cartes */
  --card-h: clamp(68px, 14vmin, 116px);
  --card-w: calc(var(--card-h) * 0.6667);
  --radius: calc(var(--card-h) * 0.11);
  --border-w: max(1px, calc(var(--card-h) * 0.0185));
  --row-gap: calc(var(--card-h) * 0.074);
  --font-size-card: clamp(14px, calc(var(--card-h) * 0.20), 26px);
  --middle-h: calc(var(--card-h) * 0.44);
  --middle-radius: calc(var(--card-h) * 0.093);
  --badge-size: calc(var(--card-h) * 0.167);
  --badge-offset: calc(var(--card-h) * 0.056);
  --badge-font: clamp(10px, calc(var(--card-h) * 0.13), 18px);
  --score-badge-size: calc(var(--card-h) * 0.296);
  --dot-size: calc(var(--card-h) * 0.093);
  --dot-gap: calc(var(--card-h) * 0.056);
  --sep-thick: max(2px, calc(var(--card-h) * 0.0185));
  --sep-vert-thick: max(2px, calc(var(--card-h) * 0.037));
  --shadow-outer-y: calc(var(--card-h) * 0.093);
  --shadow-outer-blur: calc(var(--card-h) * 0.222);
  --shadow-thin: calc(var(--card-h) * 0.0093);
}

.pazaak-row { display: flex; gap: var(--row-gap); align-items: center; justify-content: center; }

.pazaak-row .slot {
  width: var(--card-w);
  height: var(--card-h);
  border: var(--border-w) dashed rgba(255,255,255,0.2);
  border-radius: var(--radius);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: rgba(255,255,255,0.5);
}

.pazaak-sep { /* ancien séparateur horizontal (peut rester pour d'autres pages) */
  height: var(--sep-thick);
  background: rgba(255, 215, 0, 0.6);
  margin: calc(var(--row-gap) * 0.66) 0;
}

.pazaak-sep-vert {
  width: var(--sep-vert-thick);
  background: linear-gradient(180deg, rgba(255, 215, 0, 0.8), rgba(255, 215, 0, 0.2));
  border-radius: calc(var(--sep-vert-thick) / 2);
  min-height: 100%;
}

.pazaak-side { display: grid; grid-template-rows: repeat(3, auto); gap: var(--row-gap); }

.score-badge {
  width: var(--score-badge-size);
  height: var(--score-badge-size);
  border-radius: 50%;
  background: rgba(255, 215, 0, 0.2);
  color: #ffd700;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  margin-right: calc(var(--row-gap) * 0.66);
}

.round-dots { display: inline-flex; gap: var(--dot-gap); margin-left: var(--row-gap); }
.round-dot {
  width: var(--dot-size); height: var(--dot-size); border-radius: 50%; background: #666;
}
.round-dot.on { background: #2fa3ff; box-shadow: 0 0 calc(var(--card-h) * 0.056) #2fa3ff; }

.winner-banner {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.6);
  z-index: 1000;
}

.winner-banner .content {
  background: rgba(10,20,30,0.95);
  border: 2px solid #2fa3ff;
  border-radius: 12px;
  padding: 24px 32px;
  color: #2fa3ff;
  font-size: 1.8rem;
  text-shadow: 0 0 12px rgba(47,163,255,.8);
}

.card {
  width: var(--card-w);
  height: var(--card-h);
  border-radius: var(--radius);
  /* Metallic outer + subtle embossing */
  box-shadow:
    0 var(--shadow-outer-y) var(--shadow-outer-blur) rgba(0,0,0,.45), /* outer drop */
    inset 0 var(--border-w) var(--border-w) rgba(255,255,255,.20), /* top inner highlight */
    inset 0 calc(var(--border-w) * -2) calc(var(--card-h) * 0.093) rgba(0,0,0,.40), /* bottom inner shade */
    0 var(--shadow-thin) 0 rgba(255,255,255,.25); /* thin outer highlight */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: var(--font-size-card);
  color: #fff;
  /* metallic edge */
  border: var(--border-w) solid #a7adb3;
  text-shadow: 0 0 6px rgba(255,255,255,.4);
  position: relative;
  overflow: hidden;
}

form.card-form { display: inline-block; margin: 0; }

/* ---- Served (score validé) ---- */
.board-section { position: relative; }
.board-served .board-dim {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.35);
  z-index: 1;
}
.served-tag {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  pointer-events: none;
}
.served-tag .content {
  background: rgba(10,20,30,0.95);
  border: 2px solid #00bcd4;
  color: #00bcd4;
  padding: 8px 16px;
  border-radius: 10px;
  font-size: 1.4rem;
  text-shadow: 0 0 8px rgba(0,188,212,.6);
}

.card-main { background: linear-gradient(180deg, #2e7d32 0%, #1b4d1f 100%); }
.card-special.plus { background: #1565c0; }
.card-special.minus { background: #c62828; }
.card-special.dual { background: linear-gradient(135deg, #1565c0 0%, #c62828 100%); }
.card-special.utility { background: #c2a21f; color: #111; }

/* utility text should be readable */
.card-special.utility { color: #fff; text-shadow: 0 0 6px rgba(0,0,0,.45); }

.card.is-disabled { opacity: .5; pointer-events: none; }

.card-back { background: #7a7a7a; }
.card-special.plus::after { content: "+"; background: rgba(255,255,255,.25); }
.card-special.minus::after { content: "−"; background: rgba(255,255,255,.25); }
.card-special.dual::after { content: "±"; background: rgba(255,255,255,.25); }
.card-special.utility::after { content: "★"; background: rgba(0,0,0,.25); color: #ffd54f; }

/* Ensure inner label text is white on deck page labels */
label.card span { color: #fff; text-shadow: 0 0 6px rgba(0,0,0,.4); }


/* Futuristic middle panel */
.card::before {
  content: "";
  position: absolute;
  width: 80%;
  height: var(--middle-h);
  border-radius: var(--middle-radius);
  background: linear-gradient(180deg, #0b0f14, #0b0f14);
  box-shadow: inset 0 0 calc(var(--card-h) * 0.093) rgba(0,0,0,.8), 0 0 calc(var(--card-h) * 0.056) rgba(255,255,255,.1);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1;
}

/* Remove central panel for facedown (back) cards */
.card-back::before { content: none; }

/* Badges */
.card-special.plus::after,
.card-special.minus::after,
.card-special.dual::after,
.card-special.utility::after {
  position: absolute;
  right: var(--badge-offset);
  top: var(--badge-offset);
  width: var(--badge-size);
  height: var(--badge-size);
  border-radius: calc(var(--badge-size) * 0.333);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--badge-font);
  font-weight: 900;
  color: #fff;
  text-shadow: none;
}
.card-label {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 5;
  color: #fff;
  text-shadow: 0 0 6px rgba(0,0,0,.6);
  pointer-events: none;
}
.card-special.plus::after { content: "+"; background: rgba(255,255,255,.25); }
.card-special.minus::after { content: "−"; background: rgba(255,255,255,.25); }
.card-special.dual::after { content: "±"; background: rgba(255,255,255,.25); }
.card-special.utility::after { content: "★"; background: rgba(0,0,0,.25); color: #ffd54f; }


/* ----------- Pazaak Menu (hero + overlay) ----------- */
.safe-area {
  position: absolute;
  inset: 12svh 12vw;
  display: grid;
  place-items: center;
  overflow: hidden;
}

/* Deck grid responsiveness (reuse table variables) */
.deck-grid {
  /* Re-définir toutes les variables nécessaires pour que .card garde sa taille */
  --card-h: clamp(68px, 14vmin, 116px);
  --card-w: calc(var(--card-h) * 0.6667);
  --radius: calc(var(--card-h) * 0.11);
  --border-w: max(1px, calc(var(--card-h) * 0.0185));
  --row-gap: calc(var(--card-h) * 0.074);
  --font-size-card: clamp(14px, calc(var(--card-h) * 0.20), 26px);
  --middle-h: calc(var(--card-h) * 0.44);
  --middle-radius: calc(var(--card-h) * 0.093);
  --badge-size: calc(var(--card-h) * 0.167);
  --badge-offset: calc(var(--card-h) * 0.056);
  --badge-font: clamp(10px, calc(var(--card-h) * 0.13), 18px);
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(var(--card-w), var(--card-w)));
  grid-auto-rows: var(--card-h);
  gap: var(--row-gap);
  justify-content: center;
  max-height: 70vh;
  overflow: auto;
  padding: 8px;
}

.deck-grid label.card {
  /* Empêche l'étirement dans la cellule */
  width: var(--card-w);
  height: var(--card-h);
}

.deck-grid input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  width: 0; height: 0;
}

/* Feedback visuel quand sélectionné */
.deck-grid label.card:has(input:checked) {
  outline: calc(var(--border-w)) solid #00e5ff;
  box-shadow: 0 0 12px rgba(0,229,255,.6), inset 0 0 10px rgba(0,229,255,.25);
}

.pazaak-hero {
  width: 100%;
  height: 100%;
  opacity: 0.8;
  object-fit: contain;
  object-position: center;
  filter: brightness(0.95);
  z-index: 1;
}

.pazaak-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
}

.pazaak-title {
  text-shadow: 0 0 10px rgba(0, 255, 204, 0.6);
}

.pazaak-actions { gap: 0.5rem; }
